{% extends 'base.html' %}
{% block title %}Home{% endblock %}


{% block body %}

    <body>

        <!-- Masthead-->
        <header class="masthead" style="background-image: url({{ url_for('static' , filename='images/bg-masthead.jpg') }});">
            <div class="container position-relative">
                <div class="row justify-content-center">
                    <div class="col-xl-6">
                        <div class="text-center text-white">
                            <!-- Page heading-->
                            <h1 class="mb-5"> {{ gene_input }}
                                {{ species }}
                            </h1>
                            
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <ul class="navbar-nav" >
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Gene information">Gene information</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Sequence">Sequence</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Structure">Structure</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Interactions">Interactions</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Datasets">Datasets</a></li>
        </ul>
       
        <!-- Image Showcases-->
        <section class="showcase">

            <!-- information about gene -->
            <div class="container-fluid p-0" id = "Gene information">
                <div class="row g-0">
                    
                    <div class="col-lg-6 order-lg-1 my-auto showcase-text">
                        <h2>Gene information</h2>
                        <p class="lead mb-0">{{ function }}</p>
                    </div>
                </div>



            <!-- sequence with download etc -->
            <div class="container-fluid p-0" id = "Sequence">
                <div class="row g-0">
                    
                    <div class="col-lg-6 order-lg-1 my-auto showcase-text">
                        <h2>Amino Acid Sequence</h2>
                        <p class="lead mb-0" style="font-family: monospace;">{{ sequence }}</p>
                        
                        <h2>Nucleotide Sequence</h2>
                        <p class="lead mb-0" style="font-family: monospace;">{{ nuc_seq }}</p>
                    </div>
                </div>
                
            </div>



            <!-- structure PDB or whatever -->
                <div class="container-fluid p-0" id="Structure">
                <div class="row g-0">
                    <div class="col-lg-6 order-lg-1 my-auto showcase-text">
                        <h2>Structure</h2>
                        <p class="lead mb-0">Here we see the structure {{ pdb }}</p>
                    </div>
                    <div class="col-lg-6 order-lg-2">
                        <div id="viewport" style="width:400px; height:300px;"></div>
                    </div>
                </div>
            </div>

            <script src="https://unpkg.com/ngl@latest/dist/ngl.js"></script>
            <script src="static/js/react.production.min.js"></script>
            <script>
                // Define the pdb variable in the global scope
                var pdb = "{{ pdb }}";
                var uniprot = "{{ uniprot_accession_code }}"
                document.addEventListener("DOMContentLoaded", function () {
                    var stage = new NGL.Stage("viewport");
                    var source = pdb === "x" ? "https://alphafold.ebi.ac.uk/files/AF-" : "https://files.rcsb.org/download/";
                    var file = pdb === "x" ? uniprot + "-F1-model_v1.pdb" : pdb + ".pdb";

                    stage.loadFile(source + file, { defaultRepresentation: true }).then(function (o) {
                        stage.autoView();
                    }).catch(function () {
                        console.error("Failed to load file");
                    });
                });
            </script>

 

            <!-- interactions -->
                <div class="container-fluid p-0" id = "Interactions">
                <div class="row g-0">
                    
                    <div class="col-lg-6 order-lg-1 my-auto showcase-text">
                        <h2>Interactions</h2>
                        <img src="data:image/png;base64,{{ network_image }}"></img>
                    </div>
                </div>
                
            </div> 


            <!-- interactions -->
                <div class="container-fluid p-0" id = "Datasets">
                <div class="row g-0">
                    
                    <div class="col-lg-6 order-lg-1 my-auto showcase-text">
                        <h2>Datasets</h2>
                        <a href="{{ GEO_url }}" class="btn btn-primary">Go to GEO Dataset</a>
                    </div>
                </div>
                
            </div>
             


        </section>
        

















        <!-- Footer-->
        <footer class="footer bg-light">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 h-100 text-center text-lg-start my-auto">
                        <ul class="list-inline mb-2">
                            <li class="list-inline-item"><a href="#!">About</a></li>
                            <li class="list-inline-item">⋅</li>
                            <li class="list-inline-item"><a href="#!">Contact</a></li>
                            <li class="list-inline-item">⋅</li>
                            <li class="list-inline-item"><a href="#!">Terms of Use</a></li>
                            <li class="list-inline-item">⋅</li>
                            <li class="list-inline-item"><a href="#!">Privacy Policy</a></li>
                        </ul>
                        <p class="text-muted small mb-4 mb-lg-0">&copy; Helixcopter 2024.</p>
                    </div>
                    <div class="col-lg-6 h-100 text-center text-lg-end my-auto">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item me-4">
                                <a href="#!"><i class="bi-facebook fs-3"></i></a>
                            </li>
                            <li class="list-inline-item me-4">
                                <a href="#!"><i class="bi-twitter fs-3"></i></a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#!"><i class="bi-instagram fs-3"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="../js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
        {% endblock %}
