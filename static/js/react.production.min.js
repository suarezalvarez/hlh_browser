document.addEventListener("DOMContentLoaded", function () {
    // Initialize NGL Stage object
    var stage = new NGL.Stage("viewport");
    var file = "{{ tmp_file }};
    // Handle window resizing
    window.addEventListener("resize", function (event) {
        stage.handleResize();
    }, false);

    // Load the locally downloaded PDB file
    stage.loadFile(file, { defaultRepresentation: true }).then(function (o) {
        stage.autoView();
    }).catch(function () {
        console.error("Failed to load file");
    });
    fetch('/helixcopter/delete_file/' + file, {
        method: 'POST',
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
    })
    .catch(e => {
        console.log('There was a problem with the file deletion request: ' + e.message);
    });
                    });