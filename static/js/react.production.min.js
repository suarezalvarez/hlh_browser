document.addEventListener("DOMContentLoaded", function () {
    // Initialize NGL Stage object
    var stage = new NGL.Stage("viewport");

    // Handle window resizing
    window.addEventListener("resize", function (event) {
        stage.handleResize();
    }, false);

    // Use the pdb variable from the global scope
    var pdb = "{{ pdb }}";
    var uniprot = "{{ uniprot_accession_code }}";
    var source = pdb === "x" ? "https://alphafold.ebi.ac.uk/files/AF-" : "https://files.rcsb.org/download/";
    var file = pdb === "x" ? uniprot + "-F1-model_v1.pdb" : pdb + ".pdb";
    var url = source + file;

    // Initialize NGL Stage object
    var stage = new NGL.Stage("viewport");

    // Handle window resizing
    window.addEventListener("resize", function (event) {
        stage.handleResize();
    }, false);

    // Load a PDB structure
    stage.loadFile(url, { defaultRepresentation: true }).then(function (o) {
        stage.autoView();
    }).catch(function () {
        console.error("Failed to load file");
    });
